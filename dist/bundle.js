!function(e){var t={};function i(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t){const i=function(){let e={};return{fetchAddress:async function(t){const i=await fetch(`https://search.onboard-apis.com/propertyapi/v1.0.0/sale/snapshot?address=${t}&address2=${t}&radius=5&page=1&pagesize=1000`,{method:"GET",headers:{Accept:"application/json",apikey:"42c65bf54edfdc92b5825477c56a8b21"}}),s=await i.json().then(e=>e.property.filter(e=>{if(e.sale.amount.saleamt>0&&e.building.rooms.beds>0)return e}));e.propResults=s,e.propResults.forEach(e=>e.image=Math.floor(30*Math.random()+1))},fetchDetailedAddress:async function(t,i){const s=await fetch(`https://search.onboard-apis.com/propertyapi/v1.0.0/sale/detail?address1=${t.replace("#","")}&address2=${i}`,{method:"GET",headers:{Accept:"application/json",apikey:"42c65bf54edfdc92b5825477c56a8b21"}}),a=await s.json().then(e=>e.property[0]);e.propDetail=a;const n=e.propResults.find(e=>e.identifier.obPropId===a.identifier.obPropId);e.propDetail.image=n.image},getPropObj:function(){return{propData:e.propResults,propDetail:e.propDetail,propLikes:e.likes}},filterData:(t,i,s)=>e.propResults.filter(e=>"all"===s?e.sale.amount.saleamt>parseInt(t)&&e.building.rooms.beds>parseInt(i):e.sale.amount.saleamt>parseInt(t)&&e.building.rooms.beds>parseInt(i)&&e.summary.proptype===s),setLikes:()=>{e.likes=JSON.parse(localStorage.getItem("likes"))||[]},addLike:t=>{const i={id:t.identifier.obPropId,address1:t.address.line1,address2:t.address.line2,price:t.sale.amount.saleamt,bedrooms:t.building.rooms.beds,type:t.summary.proptype,image:t.image};e.likes.push(i),localStorage.setItem("likes",JSON.stringify(e.likes))},deleteLike:t=>{index=e.likes.findIndex(e=>e.id===t.identifier.obPropId),e.likes.splice(index,1),localStorage.setItem("likes",JSON.stringify(e.likes))},fetchLike:async(t,i)=>{const s=await fetch(`https://search.onboard-apis.com/propertyapi/v1.0.0/sale/detail?address1=${t.replace("#","")}&address2=${i}`,{method:"GET",headers:{Accept:"application/json",apikey:"42c65bf54edfdc92b5825477c56a8b21"}}),a=await s.json().then(e=>e.property[0]);e.propDetail=a}}}(),s=function(){const e={heart:document.querySelector(".heart"),heartList:document.querySelector(".heart-list"),heartListUl:document.querySelector(".heart-list ul"),nav:document.querySelector(".main-nav ul"),mainContent:document.querySelector("#main-content"),listingPopup:document.querySelector("#listing-popup-container"),listingPopupWindow:document.querySelector(".listing-popup"),listingInfo:document.querySelector(".listing-info"),listingsContainer:document.querySelector("#listings-container"),listings:document.querySelector(".listings"),listingsItemContainer:document.querySelector(".listing-item-container"),listingItem:document.querySelector(".listing-item"),listingButtons:document.querySelector(".buttons"),closeListing:document.querySelector(".close"),listingSearch:document.querySelector(".secondary-nav input"),listingSearchForm:document.querySelector(".secondary-nav form"),priceButton:document.querySelector(".price-button"),bedButton:document.querySelector(".beds-button"),typeButton:document.querySelector(".type-button"),filterButtons:document.querySelectorAll(".filter"),listingsLoader:document.querySelector("#listloader"),mapLoader:document.querySelector("#map-container .map-overlay"),like:document.querySelector(".like"),listingToggle:document.querySelector(".toggle")};let t,s,a=[];const n=s=>{let n=new google.maps.Marker({position:new google.maps.LatLng(parseFloat(s.location.latitude),parseFloat(s.location.longitude)),map:t,property:s}),o=new google.maps.InfoWindow({content:`\n            <p class="infoW">${s.address.line1}</p>\n            <p class="infoW">${s.address.line2}</p>\n            <p class="infoW">$${s.sale.amount.saleamt}</p>\n            <span>${s.building.rooms.beds} BEDROOM ${s.summary.proptype.replace("SFR","HOUSE").replace("CONDOMINIUM","CONDO")}</span>\n            `});n.addListener("mouseover",function(){o.open(t,n)}),n.addListener("mouseout",function(){o.close(t,n)}),n.addListener("click",async function(){const t=this.property;await fetch(`https://search.onboard-apis.com/propertyapi/v1.0.0/sale/detail?address1=${t.address.line1.replace("#","")}&address2=${t.address.line2}`,{method:"GET",headers:{Accept:"application/json",apikey:"42c65bf54edfdc92b5825477c56a8b21"}}).then(e=>e.json()).then(t=>{const s=i.getPropObj().propData.find(e=>e.identifier.obPropId===t.property[0].identifier.obPropId);t.property[0].image=s.image,e.listingInfo.innerHTML=r(t.property[0]),e.listingPopup.classList.add("listing-active"),e.listingPopupWindow.scrollTop=0})}),a.push([n,o])},r=e=>{const t=i.getPropObj().propLikes.find(t=>t.id===e.identifier.obPropId)||null;return`<figure>\n            <img src="img/house${e.image}.jpg" alt="Listing">\n        </figure>\n        <h2><i class="fas fa-map-marker-alt"></i>${e.address.line1}<i class="${null!==t?"fas":"far"} fa-heart like"></i></h2>\n        <h3>${e.address.line2}</h3>\n        <h3>Price: $${e.sale.amount.saleamt}</h3>\n        <hr>\n        <div class="features-container">\n        <h3>Features & Facts</h3>\n        <div class="features">\n            <div class="feature-item">\n                <i class="fas fa-bed"></i>\n                <div>\n                    <h4>Beds: ${e.building.rooms.beds}</h4>\n                </div>\n            </div>\n            <div class="feature-item">\n                <i class="fas fa-bath"></i>\n                <div>\n                    <h4>Bath: ${0===e.building.rooms.bathstotal?"Unknown":e.building.rooms.bathstotal}</h4>\n                </div>\n            </div>\n            <div class="feature-item">\n                <i class="fas fa-ruler-combined"></i>\n                <div>\n                    <h4>Living Size: ${0===e.building.size.bldgsize?"Unknown":e.building.size.bldgsize}</h4>\n                </div>\n            </div>\n            <div class="feature-item">\n                <i class="fas fa-fire"></i>\n                <div>\n                    <h4>Heating: ${void 0===e.utilities.heatingtype?"None":e.utilities.heatingtype}</h4>\n                </div>\n            </div>\n            <div class="feature-item">\n                <i class="fas fa-snowflake"></i>\n                <div>\n                    <h4>Cooling: ${void 0===e.utilities.coolingtype?"Type Unknown":e.utilities.coolingtype}</h4>\n                </div>\n            </div>\n            <div class="feature-item">\n                <i class="fas fa-car"></i>\n                <div>\n                    <h4>Parking: ${e.building.parking.garagetype?e.building.parking.garagetype:"No Garage"}</h4>\n                </div>\n            </div>\n            <div class="feature-item">\n                <i class="fas fa-home"></i>\n                <div>\n                    <h4>Type: ${"SFR"===e.summary.proptype?"Single Family Residence":e.summary.proptype}</h4>\n                </div>\n            </div>\n            <div class="feature-item">\n                <i class="fas fa-building"></i>\n                <div>\n                    <h4>Bldg Size: ${0===e.building.size.bldgsize?"Unknown":e.building.size.bldgsize}</h4>\n                </div>\n            </div>\n            <div class="feature-item">\n                <i class="fas fa-gavel"></i>\n                <div>\n                    <h4>Year built: ${0===e.summary.yearbuilt?"Unknown":e.summary.yearbuilt}</h4>\n                </div>\n            </div>\n\n        </div>\n        </div>\n        <hr>\n        <h3>More Information</h3>\n        <ul>\n            <li><span>Basement Size:</span> ${0===e.building.interior.bsmtsize?"Unknown":e.building.interior.bsmtsize}</li>\n            <li><span>Construction Wall Type:</span> ${e.building.construction.wallType}</li>\n            <li><span>Garage Size:</span> ${0===e.building.parking.prkgSize?"Unknown":e.building.parking.prkgSize}</li>\n            <li><span>Floors</span>: ${0===e.building.summary.levels?"Unknown":e.building.summary.levels}</li>\n            <li><span>Price per sqft:</span> ${0===e.sale.calculation.pricepersizeunit?"Unknown":"$"+e.sale.calculation.pricepersizeunit}</li>\n        </ul>`},o=(e,t)=>`\n            <button class="btn-inline btn-${t}" data-goto=${"prev"===t?e-1:e+1}>\n                <span>${"prev"===t?'<i class="fas fa-arrow-left"></i> ':""}Page ${"prev"===t?e-1:e+1}${"next"===t?' <i class="fas fa-arrow-right"></i>':""}</span>\n            </button>\n            `;return{getDomSelectors:()=>e,initMap:e=>{t=new google.maps.Map(document.getElementById("map"),{center:{lat:parseFloat(e[0].location.latitude),lng:parseFloat(e[0].location.longitude)},zoom:14}),a=[],e.forEach(e=>n(e))},displayListings:(t,i=1,s=10,a)=>{const n=(i-1)*s,r=i*s,l=t.slice(n,r).map((e,t)=>`\n                <div class="listing-item" data-property=${t} data-address1="${e.address.line1}" data-address2="${e.address.line2}" data-image=${e.image} data-id=${e.identifier.obPropId}\n                style="background: url('img/house${e.image}.jpg') no-repeat center/cover" title="Click to view listing">\n                <a href="#"></a>\n                </div>`).join("");e.listings.insertAdjacentHTML("afterbegin",`<div class="listing-items-container">${l}</div>`),((t,i,s)=>{const a=Math.ceil(i/s);if(a>1){let i;1===t&&a>1?i=o(t,"next"):t<a?i=`\n                        ${o(t,"prev")}\n                        ${o(t,"next")}\n                    `:t===a&&a>1&&(i=o(t,"prev")),e.listings.insertAdjacentHTML("beforeend",i)}})(i,t.length,s)},showPopup:t=>{e.listingPopup.classList.add("listing-active"),e.listingInfo.innerHTML=r(t)},showMarker:(e,i)=>{if(!e.target.closest(".listing-item"))return;let s=e.target.parentNode.dataset.property;i[s][1].open(t,i[s][0])},closeMarker:(e,i)=>{if(!e.target.closest(".listing-item"))return;let s=e.target.parentNode.dataset.property;i[s][1].close(t,i[s][0])},getMarkArr:()=>a,findZipCode:()=>{new google.maps.places.Autocomplete(e.listingSearch).addListener("place_changed",async function(){let e=this.getPlace();e.address_components&&(s=await e.address_components.filter(e=>{if("postal_code"===e.types[0])return e.long_name}))})},getZipCode:()=>s[0].long_name,displayLikes:t=>{const i=t.map(e=>`<li data-address1='${e.address1}' data-address2='${e.address2}'  data-image='${e.image}'><a href="">\n                <img src="img/house${e.image}.jpg" alt="Listing Item">\n                <div>\n                    <p>${e.address1}</p>\n                    <p>${e.address2}</p>\n                    <p>$${e.price}</p>\n                    <p>${e.bedrooms} Bedroom ${e.type.replace("SFR","House").replace("CONDOMINIUM","Condo")}</p>\n                </div>\n            </a>\n        </li>`).join("");e.heartListUl.innerHTML=i}}}();(function(e,t){let i,s,a;const n=new URL(window.location.href).searchParams.get("address");n||(window.location.href="home.html");const r=t.getDomSelectors(),o=async()=>{await e.fetchAddress(n),i=e.getPropObj().propData,t.initMap(i),a=t.getMarkArr(),r.mapLoader.classList.remove("active"),r.listingsLoader.classList.remove("active"),e.setLikes(),propLikes=e.getPropObj().propLikes,t.displayListings(i),t.displayLikes(propLikes)},l=async i=>{if(i.preventDefault(),!i.target.href)return;const a=i.target.parentNode.dataset.address1,n=i.target.parentNode.dataset.address2;await e.fetchDetailedAddress(a,n),s=e.getPropObj().propDetail,t.showPopup(s),r.listingPopupWindow.scrollTop=0},d=async s=>{let n;s.preventDefault(),r.mapLoader.classList.add("active"),r.listingsLoader.classList.add("active"),r.listingSearchForm.reset();try{n=t.getZipCode()}catch(e){return r.mapLoader.classList.remove("active"),r.listingsLoader.classList.remove("active"),void alert("Please enter a valid address or zip code")}r.listings.innerHTML="",await e.fetchAddress(n),i=e.filterData(r.priceButton.dataset.value,r.bedButton.dataset.value,r.typeButton.dataset.value),t.initMap(i),a=t.getMarkArr(),r.mapLoader.classList.remove("active"),r.listingsLoader.classList.remove("active"),t.displayListings(i)},c=s=>{const a=s.target.closest(".btn-inline");if(a){const s=parseInt(a.dataset.goto);r.listings.innerHTML="",i=e.filterData(r.priceButton.dataset.value,r.bedButton.dataset.value,r.typeButton.dataset.value),t.displayListings(i,s),r.listingsContainer.scrollTop=0}},p=e=>{if(!e.target.closest(".filter-btn"))return;e.target.closest(".filter-btn").parentNode.querySelector("ul").classList.toggle("filter-active")},u=s=>{if(!s.target.closest("li"))return;const n=s.target.closest("li"),o=n.parentNode.parentNode.querySelector("button");o.innerHTML=n.innerHTML+' <i class="fas fa-caret-down"></i>',o.dataset.value=n.dataset.value,n.parentNode.classList.toggle("filter-active"),(()=>{try{i=e.filterData(r.priceButton.dataset.value,r.bedButton.dataset.value,r.typeButton.dataset.value),t.initMap(i),a=t.getMarkArr(),r.listings.innerHTML="",t.displayListings(i)}catch(e){alert("There are no results for that search")}})()},g=i=>{if(i.target.closest(".far.fa-heart")){const s=i.target.closest(".like");s.classList.remove("far"),s.classList.add("fas");const a=e.getPropObj().propDetail;e.addLike(a),propLikes=e.getPropObj().propLikes,t.displayLikes(propLikes)}else if(i.target.closest(".fas.fa-heart")){const s=i.target.closest(".like");s.classList.remove("fas"),s.classList.add("far");const a=e.getPropObj().propDetail;e.deleteLike(a),propLikes=e.getPropObj().propLikes,t.displayLikes(propLikes)}},m=async i=>{i.preventDefault();const a=i.target.closest("li"),n=a.dataset.address1,o=a.dataset.address2;await e.fetchLike(n,o),(s=e.getPropObj().propDetail).image=a.dataset.image,t.showPopup(s),r.listingPopupWindow.scrollTop=0};return{init:function(){!async function(){await window.addEventListener("load",o),r.listings.addEventListener("click",e=>l(e)),r.listings.addEventListener("mouseover",e=>t.showMarker(e,a)),r.listings.addEventListener("mouseout",e=>t.closeMarker(e,a)),r.listingPopup.addEventListener("click",e=>{e.path.includes(r.listingPopupWindow)||r.listingPopup.classList.remove("listing-active")}),r.closeListing.addEventListener("click",()=>r.listingPopup.classList.remove("listing-active")),r.listingSearch.addEventListener("keyup",t.findZipCode),r.listingSearchForm.addEventListener("submit",d),r.listingsContainer.addEventListener("click",c),r.filterButtons.forEach(e=>e.addEventListener("click",p)),r.filterButtons.forEach(e=>e.addEventListener("click",u)),r.heart.addEventListener("click",()=>{r.heartList.classList.toggle("active")}),window.addEventListener("click",e=>{e.target.closest(".heart")||r.heartList.classList.remove("active")}),window.addEventListener("click",e=>{e.target.closest(".filter-btn")||document.querySelectorAll(".filter ul").forEach(e=>{e.classList.remove("filter-active")})}),r.listingInfo.addEventListener("click",g),r.heartListUl.addEventListener("click",m),r.listingToggle.addEventListener("click",()=>{r.mainContent.classList.toggle("active"),r.mainContent.classList.contains("active")?(r.listingToggle.classList.add("fa-sort-down"),r.listingToggle.classList.remove("fa-sort-up")):(r.listingToggle.classList.add("fa-sort-up"),r.listingToggle.classList.remove("fa-sort-down"))})}()}}})(i,s).init()}]);